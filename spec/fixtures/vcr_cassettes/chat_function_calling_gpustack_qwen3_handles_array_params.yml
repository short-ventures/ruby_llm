---
http_interactions:
- request:
    method: post
    uri: "<GPUSTACK_API_BASE>/chat/completions"
    body:
      encoding: UTF-8
      string: '{"model":"qwen3","messages":[{"role":"user","content":"Call the array
        params tool with tags [\"red\",\"blue\"] and tell me the combined tags."}],"stream":false,"tools":[{"type":"function","function":{"name":"array_params","description":"Uses
        params DSL array support","parameters":{"type":"object","properties":{"tags":{"type":"array","description":"List
        of tags to combine","items":{"type":"string"}}},"required":["tags"],"additionalProperties":false,"strict":true}}}],"enable_thinking":false}'
    headers:
      User-Agent:
      - Faraday v2.14.0
      Authorization:
      - Bearer <GPUSTACK_API_KEY>
      Content-Type:
      - application/json
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Fri, 16 Jan 2026 17:10:26 GMT
      - Fri, 16 Jan 2026 17:10:26 GMT
      Server:
      - uvicorn
      - uvicorn
      Keep-Alive:
      - timeout=15, max=100
      Content-Length:
      - '1966'
      Content-Type:
      - application/json
      X-Request-Accepted-At:
      - "<X_REQUEST_ID>"
      X-Request-Id:
      - "<X_REQUEST_ID>"
      Access-Control-Allow-Origin:
      - "*"
    body:
      encoding: UTF-8
      string: '{"choices":[{"finish_reason":"tool_calls","index":0,"message":{"content":null,"reasoning_content":"\nOkay,
        the user wants me to call the array_params function with the tags [\"red\",
        \"blue\"] and get the combined tags. Let me check the function definition.
        The function takes an object with a property \"tags\" which is an array of
        strings. The required parameter is \"tags\", and it''s an array. So I need
        to structure the arguments correctly. The user provided the tags as [\"red\",
        \"blue\"], so I should pass those exactly. The function''s purpose is to combine
        the tags, so the output should be those two tags combined, maybe as a single
        string separated by commas or something. But the function''s description says
        \"uses params DSL array support,\" so maybe it just returns the array as is.
        But the user says \"tell me the combined tags,\" so perhaps the function combines
        them into a single string. Wait, the function''s parameters are set up to
        accept an array, so when I call it, the arguments should be {\"tags\": [\"red\",
        \"blue\"]}. Then, the function might process them. Since the user wants the
        combined result, I need to make sure the function is called correctly. I''ll
        generate the tool call with the tags array.\n","role":"assistant","tool_calls":[{"function":{"arguments":"{\"tags\":[\"red\",\"blue\"]}","name":"array_params"},"id":"call-tiPvqJCAXRexctegCkSikkKKBlu7KxfH","type":"function"}]}}],"created":1768583428,"id":"chatcmpl-snWLjna0ZEz9oP0qiRLMY7u3u2ML3M9v","model":"qwen3","object":"chat.completion","usage":{"completion_tokens":268,"completion_tokens_details":{"accepted_prediction_tokens":0,"reasoning_tokens":243,"rejected_prediction_tokens":0},"draft_tokens":0,"draft_tokens_acceptance":0.0,"prompt_tokens":237,"prompt_tokens_details":{"cached_tokens":66},"prompt_tokens_per_second":4507.502995492497,"time_per_output_token_ms":8.248149253731343,"time_to_first_token_ms":52.579,"tokens_per_second":121.23931917788885,"total_tokens":505}}'
  recorded_at: Fri, 16 Jan 2026 17:10:28 GMT
recorded_with: VCR 6.4.0
